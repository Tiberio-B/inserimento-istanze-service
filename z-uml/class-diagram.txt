@startuml

	package "Controller" as contr #Application {
		abstract class IstanzaController {}
		class IstanzaValidator {}
		IstanzaValidator -- IstanzaController : validator
	}

	package "Service" as serv #Business {
		abstract class IstanzaService {}
	}

	package "Repository" as rep #Technology {
		interface IstanzaRepository {}
	}

	package "ExternalService" as ext #Strategy {
		abstract class ExternalService
		class SoggettoService extends ExternalService
		class AuthService extends ExternalService
		class RtsService extends ExternalService
		class RestTemplate
		ExternalService -- RestTemplate
		SoggettoService -left- IstanzaService
		SoggettoService -[hidden]left- ExternalService
		AuthService -[hidden]right- ExternalService
		RtsService -left- IstanzaService
		IstanzaController -- AuthService : authentication
	}

	'########## Relations ##########

		IstanzaController -down[thickness=6]- IstanzaService
		IstanzaService -down[thickness=6]- IstanzaRepository


	'########## Adjustments (HIDDEN) ##########

@enduml
-txmi:star